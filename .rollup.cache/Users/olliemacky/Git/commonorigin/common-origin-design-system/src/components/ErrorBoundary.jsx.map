{"version":3,"file":"ErrorBoundary.jsx","sourceRoot":"","sources":["ErrorBoundary.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { Component, ErrorInfo, ReactNode } from 'react'\nimport styled from 'styled-components'\nimport { Container } from './atoms/Container'\nimport { Stack } from './atoms/Stack'\nimport { Typography } from './atoms/Typography'\nimport { Button } from './atoms/Button'\nimport { captureException } from '../lib/errorReporting'\nimport tokens from '@/styles/tokens.json'\n\nconst { semantic } = tokens\n\ninterface Props {\n  children?: ReactNode\n  fallback?: ReactNode\n  onError?: (error: Error, errorInfo: ErrorInfo) => void\n}\n\ninterface State {\n  hasError: boolean\n  error: Error | null\n  errorInfo: ErrorInfo | null\n}\n\nconst ErrorContainer = styled.div`\n  min-height: 400px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ${semantic.color.background.subtle};\n  border: ${semantic.border.subtle};\n  border-radius: ${tokens.base.border.radius[4]};\n  padding: ${tokens.base.spacing[8]};\n  margin: ${tokens.base.spacing[4]} 0;\n`\n\nconst ErrorContent = styled.div`\n  text-align: center;\n  max-width: 600px;\n`\n\nconst ErrorIcon = styled.div`\n  font-size: 4rem;\n  margin-bottom: ${tokens.base.spacing[4]};\n  color: ${semantic.color.text.subdued};\n`\n\nconst ErrorDetails = styled.details`\n  margin-top: ${tokens.base.spacing[6]};\n  padding: ${tokens.base.spacing[4]};\n  background-color: ${semantic.color.background.surface};\n  border-radius: ${tokens.base.border.radius[3]};\n  border: ${semantic.border.subtle};\n  \n  summary {\n    cursor: pointer;\n    font-weight: ${tokens.base.fontWeight[3]};\n    color: ${semantic.color.text.subdued};\n    margin-bottom: ${tokens.base.spacing[2]};\n    \n    &:hover {\n      color: ${semantic.color.text.default};\n    }\n  }\n`\n\nconst ErrorStack = styled.pre`\n  background-color: ${semantic.color.background.default};\n  padding: ${tokens.base.spacing[3]};\n  border-radius: ${tokens.base.border.radius[2]};\n  font-size: ${tokens.base.fontSize[2]};\n  color: ${semantic.color.text.subdued};\n  overflow-x: auto;\n  white-space: pre-wrap;\n  word-break: break-word;\n`\n\nclass ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    }\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    // Update state so the next render will show the fallback UI\n    return {\n      hasError: true,\n      error,\n      errorInfo: null,\n    }\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    // Log error details\n    console.error('ErrorBoundary caught an error:', error, errorInfo)\n    \n    // Update state with error info\n    this.setState({\n      error,\n      errorInfo,\n    })\n\n    // Call optional error handler\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo)\n    }\n\n    // Report error to monitoring service\n    captureException(error, { errorInfo })\n\n    // In production, you might want to send this to an error reporting service\n    if (process.env.NODE_ENV === 'production') {\n      // Additional production-specific error handling\n      console.error('Production error boundary triggered:', error.message)\n    }\n  }\n\n  handleRetry = () => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    })\n  }\n\n  handleReload = () => {\n    window.location.reload()\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // Custom fallback UI\n      if (this.props.fallback) {\n        return this.props.fallback\n      }\n\n      // Default error UI\n      return (\n        <Container>\n          <ErrorContainer>\n            <ErrorContent>\n              <ErrorIcon>⚠️</ErrorIcon>\n              \n              <Stack direction=\"column\" gap=\"md\" alignItems=\"center\">\n                <Typography variant=\"h3\" color=\"default\">\n                  Something went wrong\n                </Typography>\n                \n                <Typography variant=\"body\" color=\"subdued\">\n                  We're sorry, but something unexpected happened. You can try refreshing the page or go back to continue browsing.\n                </Typography>\n                \n                <Stack direction=\"row\" gap=\"md\" justifyContent=\"center\">\n                  <Button \n                    variant=\"primary\" \n                    onClick={this.handleRetry}\n                    aria-label=\"Try again\"\n                  >\n                    Try Again\n                  </Button>\n                  \n                  <Button \n                    variant=\"secondary\" \n                    onClick={this.handleReload}\n                    aria-label=\"Reload page\"\n                  >\n                    Reload Page\n                  </Button>\n                </Stack>\n              </Stack>\n\n              {/* Development error details */}\n              {process.env.NODE_ENV === 'development' && this.state.error && (\n                <ErrorDetails>\n                  <summary>Error Details (Development Only)</summary>\n                  \n                  <Stack direction=\"column\" gap=\"md\">\n                    <div>\n                      <Typography variant=\"small\" color=\"subdued\">\n                        <strong>Error:</strong> {this.state.error.message}\n                      </Typography>\n                    </div>\n                    \n                    {this.state.error.stack && (\n                      <div>\n                        <Typography variant=\"small\" color=\"subdued\">\n                          <strong>Stack Trace:</strong>\n                        </Typography>\n                        <ErrorStack>{this.state.error.stack}</ErrorStack>\n                      </div>\n                    )}\n                    \n                    {this.state.errorInfo?.componentStack && (\n                      <div>\n                        <Typography variant=\"small\" color=\"subdued\">\n                          <strong>Component Stack:</strong>\n                        </Typography>\n                        <ErrorStack>{this.state.errorInfo.componentStack}</ErrorStack>\n                      </div>\n                    )}\n                  </Stack>\n                </ErrorDetails>\n              )}\n            </ErrorContent>\n          </ErrorContainer>\n        </Container>\n      )\n    }\n\n    return this.props.children\n  }\n}\n\nexport { ErrorBoundary }\n"]}